test <- GET("http://api.adzuna.com/v1/api/jobs/gb/search/1?app_id=6b7a5f95&app_key=c94a1a8fc1c69a5f150e71b2ed848aeb&results_per_page=20&what=javascript%20developer&content-type=application/json")
install.packages(c("httr", "jsonlite"))
library(httr)
library(jsonlite)
test <- GET("http://api.adzuna.com/v1/api/jobs/gb/search/1?app_id=6b7a5f95&app_key=c94a1a8fc1c69a5f150e71b2ed848aeb&results_per_page=20&what=javascript%20developer&content-type=application/json")
test_df <- fromJSON(test)
test[1]
test[2]
test[3]
test[4]
test[5]
test[6]
test[7]
test[8]
test[9]
test[10]
View(test)
library(httr)
library(jsonlite)
test <- GET("http://api.adzuna.com/v1/api/jobs/gb/search/1?app_id=6b7a5f95&app_key=c94a1a8fc1c69a5f150e71b2ed848aeb&results_per_page=20&what=javascript%20developer&content-type=application/json")
http_type(test)
test_text <- content(test, "text")
extracted_df <- jsonlite::fromJSON(test_text)
View(extracted_df)
extracted_df[1]
library(httr)
library(jsonlite)
test <- GET("http://api.adzuna.com/v1/api/jobs/ch/search/1?app_id=6b7a5f95&app_key=c94a1a8fc1c69a5f150e71b2ed848aeb&results_per_page=20&what=data%20analyst&content-type=application/json")
http_type(test)
test_text <- content(test, "text")
extracted_df <- jsonlite::fromJSON(test_text)
extracted_df[1]
View(extracted_df)
get_adzuna_api <- function(api_id, api_key, page) {
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=data%20analyst&
max_days_old=365&salary_include_unknown=1&
content-type=application/json")
api_call_string
}
test <- GET(get_adzuna_api("6b7a5f95", "c94a1a8fc1c69a5f150e71b2ed848aeb", 1))
get_adzuna_api("6b7a5f95", "c94a1a8fc1c69a5f150e71b2ed848aeb", 1)
get_adzuna_api <- function(api_id, api_key, page) {
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=data%20analyst&max_days_old=365&salary_include_unknown=1&content-type=application/json")
api_call_string
}
test <- GET(get_adzuna_api("6b7a5f95", "c94a1a8fc1c69a5f150e71b2ed848aeb", 1))
http_type(test)
http_error(test)
readLines("/home/pete/Documents/adzuna_api.txt")
readLines("/home/pete/Documents/adzuna_api.txt")[1]
test <- GET(get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1))
http_type(test)
http_error(test)
stringr::str_c(c("potato", "fish"))
stringr::str_c(c("potato", "fish")[1], c("potato", "fish")[2])
get_adzuna <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_call_string
}
test <- GET(get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst")))
get_adzuna <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_call_string
}
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_call_string
}
test <- GET(get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst")))
http_error(test)
http_type(test)
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
http_type(test)
http_error(test)
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)[1]
api_return_df
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
View(test)
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
http_type(test)
http_error(test)
extracted_df[1]
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df[1]
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df
}
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
test[1]
test$results
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df$results
}
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
test$description[1]
test$description[2]
test$description[3]
test$description[4]
##This chunk is concerned with getting the API function working
library(httr)
library(jsonlite)
## Write a function to get any given page. After that I can just iterate while there are still jobs to find :)
get_adzuna_api <- function(api_id, api_key, page, key_words) { #API ID and key are variables, so that they can remain secret
key_words <- stringr::str_c(key_words[1], "%20", key_words[2]) #Can only take two key words. All needed for most data professions
api_call_string <- stringr::str_c("http://api.adzuna.com/v1/api/jobs/ch/search/",  ##If I wanted to change country, it would be on this line
page, "?app_id=", api_id, "&app_key=", api_key,
"&results_per_page=20&what=", key_words,
"&max_days_old=730&salary_include_unknown=1&content-type=application/json")
api_return <- GET(api_call_string)
api_return_text <- content(api_return, "text")
api_return_df <- jsonlite::fromJSON(api_return_text)
api_return_df$results
}
## Test the function
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 1,
c("data", "analyst"))
test$description[4]
View(test)
test$company
test$company$display_name
test$location$display_name
## This code block is about removing unwanted columns from the APi response and renaming other ones.
## Functionalizing for easier integration into the automated pipeline downstream
clean_adzuna_response <- function(adzuna_response) {
response_cleaned <- data.frame(
date_posted = adzuna_response$created,
job_title = adzuna_response$title,
company = adzuna_response$company$display_name,
location = adzuna_response$location$display_name,
website = adzuna_response$redirect_url
)
response_cleaned
}
##Test clean_adzuna_response
test2 <- clean_adzuna_response(test)
View(test2)
## Test the function
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 10,
c("data", "analyst"))
test$location$display_name
## This code block is about removing unwanted columns from the APi response and renaming other ones.
## Functionalizing for easier integration into the automated pipeline downstream
clean_adzuna_response <- function(adzuna_response) {
response_cleaned <- data.frame(
date_posted = adzuna_response$created,
job_title = adzuna_response$title,
company = adzuna_response$company$display_name,
location = adzuna_response$location$display_name,
website = adzuna_response$redirect_url
)
response_cleaned
}
##Test clean_adzuna_response
test2 <- clean_adzuna_response(test)
View(test2)
test2$website[1]
## Test the function
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 40,
c("data", "analyst"))
test$location$display_name
## Test the function
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 20,
c("data", "analyst"))
test$location$display_name
## Test the function
test <- get_adzuna_api(
readLines("/home/pete/Documents/adzuna_api.txt")[1],
readLines("/home/pete/Documents/adzuna_api.txt")[2], 10,
c("data", "analyst"))
test$location$display_name
install.packages("rvest")
### At first, this will be a mess of re-learning how to web scrape :P
library(rvest)
adzuna_html_response <- read_html(test2$website[1])
adzuna_p_tags <- html_nodes(adzuna_html_response, "p")
View(adzuna_p_tags)
adzuna_p_tags <- adzuna_html_response %>%
html_nodes("adp-body mx-4 mb-4 text-sm md:mx-0 md:text-base md:mb-0")
adzuna_p_tags <- adzuna_html_response %>%
html_nodes("adp-body")
